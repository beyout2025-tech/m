<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
:root {
  --primary: #003366; --accent: #2ecc71; --bg: #f0f2f5; --whatsapp: #25D366;
}
/* ... Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ ... */
body { margin: 0; font-family: 'Tajawal', sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
.card-container { width: 100%; max-width: 400px; background: #fff; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); overflow: hidden; animation: fadeIn 0.6s ease; }
.card-header { background: var(--primary); color: white; padding: 25px; text-align: center; }
.card-body { padding: 30px; }
.info-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
.info-label { color: #888; font-size: 14px; }
.info-value { color: #333; font-weight: bold; }
.student-id-box { background: #f8fafc; border: 2px dashed var(--accent); border-radius: 12px; margin-top: 20px; padding: 15px; text-align: center; }
.id-number { display: block; font-size: 24px; color: var(--primary); font-weight: 700; margin: 5px 0; }

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
.actions { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
button { padding: 14px; border: none; border-radius: 10px; cursor: pointer; font-family: 'Tajawal'; font-weight: bold; transition: 0.3s; font-size: 15px; }
.btn-whatsapp { background: var(--whatsapp); color: white; display: flex; align-items: center; justify-content: center; gap: 8px; }
.btn-download { background: var(--accent); color: white; }
.btn-copy { background: #eee; color: var(--primary); }
.note-box { background: #fff9e6; border-right: 4px solid #ffcc00; padding: 12px; font-size: 13px; color: #665500; margin-top: 15px; border-radius: 5px; text-align: center; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>

<div class="card-container" id="profileCard">
  <div id="captureArea">
    <div class="card-header">
      <h2 style="margin:0">Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø°ÙƒÙŠØ©</h2>
      <p style="margin:5px 0 0; opacity:0.8; font-size:13px;">Ù…Ø¤Ø³Ø³Ø© ÙƒÙ† Ø£Ù†Øª Ù„Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„ØªØ£Ù‡ÙŠÙ„</p>
    </div>

    <div class="card-body">
      <div class="info-item"><span class="info-label">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</span><span class="info-value" id="dispNameAr">---</span></div>
      <div class="info-item"><span class="info-label">Ø§Ù„Ø¨Ù„Ø¯:</span><span class="info-value" id="dispCountry">---</span></div>
      <div class="info-item"><span class="info-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</span><span class="info-value" id="dispPhone">---</span></div>
      <div class="info-item"><span class="info-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</span><span class="info-value" id="dispEmail">---</span></div>
      <div class="student-id-box"><span class="info-label">Ø±Ù‚Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</span><span class="id-number" id="dispId">000000</span></div>
    </div>
  </div>

  <div class="card-body" style="padding-top:0">
    <div class="note-box">
      âš ï¸ <strong>Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ø§Ù…Ø©:</strong> ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ Ø±Ø³Ù…ÙŠØ§Ù‹.
    </div>

    <div class="actions">
      <button class="btn-whatsapp" onclick="sendToAdmin()">
        ğŸ“² Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©
      </button>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <button class="btn-copy" onclick="copyId()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø±Ù</button>
        <button class="btn-download" onclick="downloadCard()">ğŸ“¸ Ø­ÙØ¸ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</button>
      </div>
      
      
    </div>
  </div>
</div>

<script>
window.onload = function() {
  const studentId = localStorage.getItem("studentId");
  if (!studentId) {
    window.location.href = "l.html";
  } else {
    document.getElementById("dispNameAr").innerText = localStorage.getItem("studentName") || "---";
    document.getElementById("dispCountry").innerText = localStorage.getItem("studentCountry") || "---";
    document.getElementById("dispPhone").innerText = localStorage.getItem("studentPhone") || "---";
    document.getElementById("dispId").innerText = studentId;
  }
};

function sendToAdmin() {
  const name = localStorage.getItem("studentName") || "ØºÙŠØ± Ù…ØªÙˆÙØ±";
  const id = localStorage.getItem("studentId") || "ØºÙŠØ± Ù…ØªÙˆÙØ±";
  const email = localStorage.getItem("studentEmail") || "ØºÙŠØ± Ù…ØªÙˆÙØ±";
  const phone = localStorage.getItem("studentPhone") || "ØºÙŠØ± Ù…ØªÙˆÙØ±";
  const country = localStorage.getItem("studentCountry") || "ØºÙŠØ± Ù…ØªÙˆÙØ±";

  const message = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±ÙƒØ§ØªÙ‡%0A%0AÙ…Ø¹ÙƒÙ… Ø§Ù„Ù…ØªØ¯Ø±Ø¨/Ù€Ø©: *${name}*%0A%0AÙ„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ© ÙˆØ¨ÙŠØ§Ù†Ø§ØªÙŠ ÙƒØ§Ù„ØªØ§Ù„ÙŠ:%0Aâœ… Ù…Ø¹Ø±ÙÙŠ Ù‡Ùˆ: *${id}*%0AğŸ“§ Ø¨Ø±ÙŠØ¯ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù‡Ùˆ: ${email}%0AğŸ“± Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ÙŠ Ù‡Ùˆ: ${phone}%0AğŸŒ Ø§Ù„Ø¨Ù„Ø¯: ${country}%0A%0AÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨ÙŠ ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„.`;

  const whatsappUrl = `https://wa.me/967778185189?text=${message}`;
  
  window.open(whatsappUrl, '_blank');
}

function copyId() {
  const id = document.getElementById("dispId").innerText;
  navigator.clipboard.writeText(id).then(() => alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø±Ù Ø¨Ù†Ø¬Ø§Ø­"));
}

function downloadCard() {
  const area = document.getElementById("captureArea");
  html2canvas(area, { backgroundColor: "#f0f2f5" }).then(canvas => {
    const link = document.createElement('a');
    link.download = `Student_Card_${localStorage.getItem("studentId")}.png`;
    link.href = canvas.toDataURL();
    link.click();
  });
}

function registerAnother() {
  if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø¢Ø®Ø±ØŸ")) {
    localStorage.clear();
    window.location.href = "l.html";
  }
}
</script>

</body>
</html>
