<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
:root {
  --primary: #003366; --primary-hover: #004a94;
  --accent: #2ecc71; --bg: #f0f2f5; --error: #e74c3c;
  --success: #27ae60;
}
body {
  margin: 0; font-family: 'Tajawal', sans-serif; background: var(--bg);
  padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh;
}
.container {
  width: 100%; max-width: 480px; background: #fff; padding: 30px;
  border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1);
  border-top: 10px solid var(--primary); position: relative; overflow: hidden;
}

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
.progress-container { position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: #eee; }
#progressBar { width: 0%; height: 100%; background: var(--accent); transition: 0.4s; }

h2 { text-align: center; color: var(--primary); margin-bottom: 25px; }

/* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ù…Ø³Ø¨Ù‚Ø§Ù‹ */
.profile-card {
  background: #fff; border: 2px solid #eef2f7; border-radius: 15px; padding: 20px;
  margin-bottom: 20px; display: none; animation: slideDown 0.5s ease;
}
.profile-card h3 { margin-top: 0; color: var(--primary); border-bottom: 1px solid #eee; padding-bottom: 10px; }
.info-row { display: flex; justify-content: space-between; margin: 8px 0; font-size: 14px; }
.info-label { color: #888; }
.info-value { font-weight: bold; color: #333; }

.welcome-back {
  background: #eef2f7; padding: 15px; border-radius: 10px;
  margin-bottom: 20px; font-size: 14px; color: var(--primary);
  border-right: 4px solid var(--primary); display: none; position: relative;
}
.close-notice { position: absolute; left: 10px; top: 10px; cursor: pointer; font-weight: bold; }

.input-group { margin-bottom: 18px; position: relative; transition: 0.3s; }
.input-group.hidden { display: none; }

label { display: block; margin-bottom: 6px; font-size: 13px; color: #555; font-weight: bold; }
input, select {
  width: 100%; padding: 12px 15px; border-radius: 10px; border: 2px solid #eee;
  font-size: 15px; font-family: 'Tajawal', sans-serif; box-sizing: border-box; transition: 0.3s;
}
input:focus, select:focus { outline: none; border-color: var(--primary); background: #fff; }
input.valid { border-color: var(--success) !important; }
input.invalid { border-color: var(--error) !important; }

.error-hint { color: var(--error); font-size: 11px; margin-top: 4px; display: none; }

button {
  width: 100%; padding: 15px; border: none; border-radius: 10px; background: var(--primary);
  color: #fff; font-size: 17px; font-weight: bold; cursor: pointer; margin-top: 10px;
  display: flex; justify-content: center; align-items: center; gap: 10px; transition: 0.3s;
}
button:hover:not(:disabled) { background: var(--primary-hover); transform: translateY(-2px); }
button:disabled { background: #ccc; cursor: not-allowed; }

/* Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„Ø²Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£ */
@keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }
.shake { animation: shake 0.3s ease-in-out 2; }

.id-box {
  margin-top: 15px; padding: 20px; background: #f0fff4;
  border: 2px dashed var(--accent); border-radius: 15px; text-align: center;
}

@keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.skeleton { opacity: 0.5; pointer-events: none; }
</style>
</head>
<body>

<div class="container" id="mainContainer">
  <div class="progress-container"><div id="progressBar"></div></div>
  
  <h2 id="formTitle">Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨</h2>

  <div id="savedNotice" class="welcome-back">
    <span class="close-notice" onclick="this.parentElement.style.display='none'">âœ•</span>
    ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ Ù…Ø¬Ø¯Ø¯Ø§Ù‹! Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø³Ø¬Ù„Ø© Ù„Ø¯ÙŠÙ†Ø§.
  </div>

  <div id="studentProfile" class="profile-card">
    <div id="captureArea">
      <h3>Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø·Ø§Ù„Ø¨</h3>
      <div class="info-row"><span class="info-label">Ø§Ù„Ø§Ø³Ù…:</span> <span class="info-value" id="pName"></span></div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ø¨Ù„Ø¯:</span> <span class="info-value" id="pCountry"></span></div>
      <div class="info-row"><span class="info-label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</span> <span class="info-value" id="pPhone"></span></div>
      <div class="info-row"><span class="info-label">Ø§Ù„Ù…Ø¹Ø±Ù:</span> <span class="info-value" style="color:var(--primary)" id="pId"></span></div>
    </div>
    <button class="copy-btn" style="background:#fff; color:var(--primary); border:1px solid #ccc; font-size:13px; padding:8px;" onclick="copyId(localStorage.getItem('studentId'))">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø±Ù</button>
    <button onclick="downloadCard()" style="background:var(--accent); font-size:13px; padding:8px;">ğŸ“¸ Ø­ÙØ¸ ÙƒØµÙˆØ±Ø©</button>
  </div>

  <div id="registrationForm">
    <div class="input-group">
      <label>Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ)</label>
      <input id="nameAr" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ" onblur="validateField(this)">
      <div id="hintAr" class="error-hint">âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø·</div>
    </div>

    <div class="input-group hidden" id="groupEn">
      <label>Full Name (English) - ØªØ±Ø¬Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</label>
      <input id="nameEn" type="text" placeholder="Example: Ahmed Ali" style="direction: ltr;" autocapitalize="words" onblur="validateField(this)">
      <div id="hintEn" class="error-hint">âš ï¸ English letters only</div>
    </div>

    <div class="input-group">
      <label>Ø§Ù„Ø¹Ù…Ø±</label>
      <input id="age" type="number" min="5" max="100" placeholder="Ù…Ù† 5 Ø¥Ù„Ù‰ 100" onblur="validateField(this)">
    </div>

    <div class="input-group">
      <label>Ø§Ù„Ø¨Ù„Ø¯</label>
      <select id="country" onchange="validateField(this)">
        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø¯...</option>
      </select>
    </div>

    <div class="input-group">
      <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
      <input id="phone" type="tel" inputmode="tel" placeholder="05xxxxxxxx" onblur="validateField(this)">
    </div>

    <div class="input-group">
      <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
      <input id="email" type="email" placeholder="mail@example.com" onblur="validateField(this)">
    </div>

    <button id="btn" onclick="register()">
      <span id="btnText">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
      <div id="spinner" class="spinner" style="display:none; width:18px; height:18px; border:3px solid rgba(255,255,255,0.3); border-radius:50%; border-top-color:#fff; animation:spin 0.8s linear infinite;"></div>
    </button>
  </div>

  <div id="result"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwoeNXcnVcEiPwXHrwjaIGSo1Xxk4_b23y10LiuIhPqsz7L1lpR4CSZ_IsgiEQpxb29/exec";

const ARAB_COUNTRIES = ["Ù…ØµØ±", "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", "Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª", "Ø§Ù„ÙƒÙˆÙŠØª", "Ù‚Ø·Ø±", "Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†", "Ø¹Ù…Ø§Ù†", "Ø§Ù„Ø£Ø±Ø¯Ù†", "Ù„Ø¨Ù†Ø§Ù†", "ÙÙ„Ø³Ø·ÙŠÙ†", "Ø³ÙˆØ±ÙŠØ§", "Ø§Ù„Ø¹Ø±Ø§Ù‚", "Ø§Ù„ÙŠÙ…Ù†", "Ù„ÙŠØ¨ÙŠØ§", "ØªÙˆÙ†Ø³", "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±", "Ø§Ù„Ù…ØºØ±Ø¨", "Ø§Ù„Ø³ÙˆØ¯Ø§Ù†", "Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§", "Ø§Ù„ØµÙˆÙ…Ø§Ù„", "Ø¬ÙŠØ¨ÙˆØªÙŠ", "Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø±"];

// ØªØ¹Ø¨Ø¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆÙ„
const countrySelect = document.getElementById("country");
ARAB_COUNTRIES.forEach(c => {
  let opt = document.createElement("option");
  opt.value = c; opt.innerText = c;
  countrySelect.appendChild(opt);
});

// Ù…Ø±Ø§Ù‚Ø¨Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ÙˆØªØ±Ø¬Ù…ØªÙ‡
// Ù…Ø±Ø§Ù‚Ø¨Ø© ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ù„Ø­Ø¸Ø© Ø¨Ù„Ø­Ø¸Ø©
document.getElementById("nameAr").addEventListener("input", function() {
  const val = this.value;
  const groupEn = document.getElementById("groupEn");
  const nameEnInput = document.getElementById("nameEn");

  // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù‚Ù„ Ù„ÙŠØ¨Ù‚Ù‰ Ø¹Ø±Ø¨ÙŠØ§Ù‹ ÙÙ‚Ø·
  this.value = val.replace(/[^\u0600-\u06FF\s]/g, '');
  
  // 1. Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ÙÙˆØ± Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© (Ø¨Ø¹Ø¯ Ø£ÙˆÙ„ Ø­Ø±ÙÙŠÙ† Ù…Ø«Ù„Ø§Ù‹)
  if (this.value.length >= 2) {
    groupEn.style.display = "block";
    groupEn.classList.remove("hidden");
  } else {
    groupEn.style.display = "none";
  }

  // 2. Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ÙÙˆØ±ÙŠØ© (Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø­Ø±Ù)
  // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ØªØªØ·Ù„Ø¨ Google Translate API 
  // Ø³Ù†Ù‚ÙˆÙ… Ù‡Ù†Ø§ Ø¨ØªØ­ÙÙŠØ² Ø§Ù„Ø­Ù‚Ù„ Ù„ÙŠÙƒÙˆÙ† Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙƒØªØ¨Ø© Ø¨Ø³ÙŠØ·Ø©
  if (this.value.length > 3) {
      // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø¬Ù„Ø¨ ØªØ±Ø¬Ù…Ø© Ø¥Ø°Ø§ ØªÙˆÙØ± Ù„Ø¯ÙŠÙƒ Ù…ÙØªØ§Ø­ API
      // Ø­Ø§Ù„ÙŠØ§Ù‹ Ø³ÙŠØªØ±Ùƒ Ø§Ù„Ø­Ù‚Ù„ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ÙŠÙ…Ù„Ø£Ù‡ Ù…Ø¹ ØªÙ†Ø¨ÙŠÙ‡ Ø¨ØµØ±ÙŠ
      nameEnInput.placeholder = "Ø¬Ø§Ø±ÙŠ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©...";
  }
  
  updateProgress();
});


document.getElementById("nameEn").addEventListener("input", function() {
  this.value = this.value.replace(/[^A-Za-z\s]/g, '');
});

// Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ÙÙˆØ±ÙŠ
function validateField(el) {
  let isValid = false;
  if (el.id === "email") {
    isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(el.value);
  } else if (el.id === "phone") {
    isValid = /^[0-9+]{8,15}$/.test(el.value);
  } else {
    isValid = el.value.trim().length > 0;
  }

  if (isValid) {
    el.classList.add("valid");
    el.classList.remove("invalid");
  } else {
    el.classList.remove("valid");
    el.classList.add("invalid");
  }
  updateProgress();
}

function updateProgress() {
  const inputs = Array.from(document.querySelectorAll("#registrationForm input, #registrationForm select"));
  const validInputs = inputs.filter(i => i.classList.contains("valid")).length;
  const total = inputs.filter(i => !i.parentElement.classList.contains("hidden")).length;
  document.getElementById("progressBar").style.width = (validInputs / total * 100) + "%";
}

window.addEventListener('DOMContentLoaded', checkExistingRegistration);

function checkExistingRegistration() {
  const savedId = localStorage.getItem("studentId");
  if (savedId) {
    document.getElementById("savedNotice").style.display = "block";
    document.getElementById("registrationForm").style.display = "none";
    document.getElementById("studentProfile").style.display = "block";
    document.getElementById("formTitle").innerText = "Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©";
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
    document.getElementById("pName").innerText = localStorage.getItem("studentName") || "---";
    document.getElementById("pCountry").innerText = localStorage.getItem("studentCountry") || "---";
    document.getElementById("pPhone").innerText = localStorage.getItem("studentPhone") || "---";
    document.getElementById("pId").innerText = savedId;

    document.getElementById("result").innerHTML = `
      
    `;
  }
}

function enableNewRegistration() {
  // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø§ Ù†Ø­Ø°Ù ID Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù…Ù† localStorage ØªÙ…Ø§Ù…Ø§Ù‹ Ø¥Ø°Ø§ Ø£Ø±Ø¯Ù†Ø§ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø°Ø§ÙƒØ±Ø©ØŒ 
  // Ù„ÙƒÙ†Ù†Ø§ Ø³Ù†ØµÙØ± Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
  document.getElementById("registrationForm").style.display = "block";
  document.getElementById("studentProfile").style.display = "none";
  document.getElementById("formTitle").innerText = "Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨";
  document.getElementById("registrationForm").classList.remove("skeleton");
  document.getElementById("progressBar").style.width = "0%";
  
  document.querySelectorAll('input').forEach(i => {
    i.value = ""; i.classList.remove("valid", "invalid");
  });
  document.getElementById("country").value = "";
}

async function register() {
  const btn = document.getElementById("btn");
  const form = document.getElementById("registrationForm");
  const payload = {
    name: document.getElementById("nameEn").value.trim(),
    arabicName: document.getElementById("nameAr").value.trim(),
    age: parseInt(document.getElementById("age").value),
    country: document.getElementById("country").value,
    phone: document.getElementById("phone").value.trim(),
    email: document.getElementById("email").value.trim()
  };

  if (!payload.arabicName || !payload.age || !payload.country || !payload.phone) {
    btn.classList.add("shake");
    setTimeout(() => btn.classList.remove("shake"), 600);
    alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
    return;
  }

  form.classList.add("skeleton");
  btn.disabled = true;
  document.getElementById("btnText").innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...";
  document.getElementById("spinner").style.display = "block";

  try {
    const response = await fetch(SCRIPT_URL, {
      method: "POST",
      headers: { "Content-Type": "text/plain;charset=utf-8" },
      body: JSON.stringify(payload)
    });

    const data = await response.json();

    if (data.status === "SUCCESS") {
      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹ Ù„Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
      localStorage.setItem("studentId", data.studentId);
      localStorage.setItem("studentName", payload.arabicName);
      localStorage.setItem("studentCountry", payload.country);
      localStorage.setItem("studentPhone", payload.phone);
      
      location.reload(); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
    }
  } catch (e) {
    alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±");
    form.classList.remove("skeleton");
    btn.disabled = false;
    document.getElementById("btnText").innerText = "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
  } finally {
    document.getElementById("spinner").style.display = "none";
  }
}

function copyId(id) {
  navigator.clipboard.writeText(id).then(() => alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ø¹Ø±Ù: " + id));
}

function downloadCard() {
  const area = document.getElementById("captureArea");
  html2canvas(area).then(canvas => {
    const link = document.createElement('a');
    link.download = 'student-card.png';
    link.href = canvas.toDataURL();
    link.click();
  });
}


let typingTimer;
const doneTypingInterval = 500; // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù†ØµÙ Ø«Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ ØªÙˆÙ‚Ù Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù„Ù„ØªØ±Ø¬Ù…Ø©

document.getElementById("nameAr").addEventListener("input", function() {
  const val = this.value;
  const groupEn = document.getElementById("groupEn");
  
  this.value = val.replace(/[^\u0600-\u06FF\s]/g, ''); // Ù…Ù†Ø¹ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ ÙÙŠ Ø­Ù‚Ù„ Ø§Ù„Ø¹Ø±Ø¨ÙŠ

  if (this.value.length >= 3) {
    groupEn.classList.remove("hidden");
    groupEn.style.display = "block";
    
    // Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ±Ø¬Ù…Ø©
    clearTimeout(typingTimer);
    typingTimer = setTimeout(async () => {
      if (this.value) {
        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ ØªØ±Ø¬Ù…Ø© Ø¨Ø³ÙŠØ·Ø© Ø¹Ø¨Ø± API Ù…Ø¬Ø§Ù†ÙŠ (Ù…Ø«Ù„ MyMemory)
        try {
          const res = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(this.value)}&langpair=ar|en`);
          const data = await res.json();
          if(data.responseData.translatedText) {
            document.getElementById("nameEn").value = data.responseData.translatedText;
            document.getElementById("nameEn").classList.add("valid");
          }
        } catch (e) { console.log("Translation error"); }
      }
    }, doneTypingInterval);
  }
});

</script>

</body>
</html>
